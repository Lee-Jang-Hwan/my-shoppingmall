당신은 풀스택 웹 개발자입니다. 아래 요구사항에 따라 의류 쇼핑몰 MVP를 개발해주세요.

## 쇼핑몰 1차 MVP - PRD (Product Requirements Document)

## 📋 프로젝트 개요

### 목적

- **핵심 목표**: 최소 기능으로 빠른 시장 검증
- **검증 가설**: 간단한 구조와 적은 기능으로도 실제 구매 전환이 일어나는지 확인
- **출시 형태**: 테스트 결제 기능을 포함한 실동작 쇼핑몰

### 핵심 가치

- 옷 판매에 집중한 단순 명료한 쇼핑 경험
- 빠른 로그인/회원가입, 간편한 결제 프로세스

---

## 🎯 타겟 사용자

### Primary User

- **연령대**: 20-30대
- **특징**: 온라인 쇼핑에 익숙하고, 간편한 구매 프로세스를 선호

---

## 🏗️ 기술 스택

### Package Manager

- pnpm

### Frontend

- Next.js (React)

### Backend & Database

- Supabase (PostgreSQL)

### 인증

- Clerk (로그인/회원가입)
- Supabase에는 사용자 추가 정보만 저장
- supabase에 RLS는 사용하지 않습니다.

### 결제

- Toss Payments MCP
- 테스트 결제 모드로 운영

---

## 🚀 개발 우선순위

### Phase 1: 기본 인프라 (1주)

- [ ] Next.js 프로젝트 셋업
- [ ] Supabase 프로젝트 생성 및 테이블 스키마 작성
- [ ] Clerk 연동 (회원가입/로그인)
- [ ] 기본 레이아웃 및 라우팅

### Phase 2: 상품 기능 (1주)

- [ ] 홈페이지
  - [ ] 최신 상품 섹션
    - [ ] 최신 등록 상품 12개 표시 (created_at 기준 내림차순)
    - [ ] 활성 상품만 표시 (is_active = true)
    - [ ] 상품 카드 그리드 레이아웃 (반응형: 모바일 1열, 태블릿 2열, 데스크톱 3-4열)
    - [ ] 상품이 없을 경우 빈 상태 메시지 표시
  - [ ] 카테고리 진입 섹션
    - [ ] 각 카테고리별 상품 개수 집계 및 표시
    - [ ] 카테고리 버튼 그리드 레이아웃 (반응형: 모바일 2열, 태블릿 3열, 데스크톱 4-6열)
    - [ ] 카테고리 클릭 시 해당 카테고리 상품 목록 페이지로 이동 (`/products?category={category}`)
    - [ ] 카테고리 라벨 표시 (한글 이름으로 변환)
    - [ ] 상품이 있는 카테고리만 표시
  - [ ] 인기상품 섹션 (BEST)
    - [ ] order_items 테이블 기반 판매량 집계 (quantity 합산)
    - [ ] 판매량이 높은 상품 상위 8개 표시
    - [ ] 판매 데이터가 없을 경우 섹션 숨김 처리
    - [ ] 판매량 순서대로 정렬하여 표시
    - [ ] "BEST" 배지 표시
  - [ ] 디자인 콜라보 섹션
    - [ ] 카테고리가 "collaboration"인 상품 조회
    - [ ] 상품명 또는 설명에 "콜라보", "collaboration", "디자인" 키워드가 포함된 상품 조회
    - [ ] 최대 6개 상품 표시
    - [ ] "콜라보" 배지 표시
  - [ ] 기획 상품 섹션 (향후 구현)
    - [ ] 프로모션/특가 상품 강조 표시
    - [ ] 할인율 또는 특가 배지 표시
    - [ ] 프로모션 기간 표시
- [ ] 상품 목록 페이지
  - [ ] 그리드 형태로 상품 목록 표시
  - [ ] 페이지네이션 기능
  - [ ] 정렬 기능 (가격순, 최신순, 이름순)
  - [ ] 카테고리 필터링
- [ ] 상품 상세 페이지
  - [ ] 상품 이미지 갤러리 (메인 이미지 + 썸네일)
  - [ ] 상품 기본 정보 표시 (이름, 가격, 설명)
  - [ ] 상품 옵션 선택 (사이즈, 색상 등)
  - [ ] 수량 선택 기능
  - [ ] 장바구니 추가 버튼
  - [ ] 즉시 구매 버튼
  - [ ] 상품 상세 정보 섹션 (상세 설명, 사이즈 가이드 등)
  - [ ] 배송/반품 안내 정보 표시
- [ ] 어드민 상품 관리 대시보드
  - [ ] 관리자 전용 페이지 생성 (`/admin`)
  - [ ] Clerk 기반 관리자 권한 체크 (특정 사용자만 접근)
  - [ ] 상품 등록 폼
    - [ ] 상품 기본 정보 입력 (이름, 가격, 설명)
    - [ ] 상품 이미지 업로드 (다중 이미지 지원)
    - [ ] 카테고리 선택
    - [ ] 상품 옵션 설정 (사이즈, 색상 등)
    - [ ] 재고 수량 설정
    - [ ] 프로모션/특가 여부 설정
  - [ ] 상품 목록 조회 (관리자용)
    - [ ] 전체 상품 목록 표시
    - [ ] 상품 상태별 필터링 (판매중/품절/숨김)
    - [ ] 검색 기능
  - [ ] 상품 수정 기능
    - [ ] 기존 상품 정보 불러오기
    - [ ] 정보 수정 및 저장
    - [ ] 이미지 추가/삭제
  - [ ] 상품 삭제 기능
    - [ ] 삭제 확인 다이얼로그
    - [ ] 소프트 삭제 또는 완전 삭제

### Phase 3: 장바구니 & 주문 (1주)

- [ ] 장바구니 기능 (추가/삭제/수량 변경)
  - [ ] 장바구니 데이터베이스 스키마 설계
    - [ ] cart_items 테이블 생성
    - [ ] 사용자별 장바구니 항목 관리 (clerk_id로 연결)
    - [ ] 상품 ID, 옵션 정보, 수량 저장
    - [ ] 생성/수정 시간 추적
  - [ ] 장바구니 추가 기능
    - [ ] 상품 상세 페이지에서 장바구니 추가
    - [ ] 선택한 옵션(사이즈, 색상 등) 저장
    - [ ] 수량 선택 기능 (최소 1개, 최대 재고 수량까지)
    - [ ] 재고 확인 (품절 상품 장바구니 추가 불가)
    - [ ] 동일 상품 + 동일 옵션 조합 시 수량 합산 또는 별도 항목으로 추가 선택
    - [ ] 장바구니 추가 성공 알림 표시
    - [ ] 비로그인 사용자 장바구니 추가 시 로그인 유도
  - [ ] 장바구니 조회 기능
    - [ ] 사용자별 장바구니 목록 조회 (마이 장바구니)
    - [ ] 장바구니 페이지 생성 (`/cart`)
    - [ ] 장바구니 항목 정보 표시 (상품 이미지, 이름, 옵션, 단가, 수량, 총액)
    - [ ] 장바구니 총 금액 계산 및 표시
    - [ ] 장바구니가 비어있을 경우 빈 상태 메시지 표시
    - [ ] 장바구니 아이콘에 개수 배지 표시 (Navbar)
  - [ ] 장바구니 수량 변경 기능
    - [ ] 장바구니 페이지에서 수량 증가/감소 버튼
    - [ ] 수량 직접 입력 가능
    - [ ] 최소 수량 1개 제한
    - [ ] 최대 수량은 재고 수량까지 제한
    - [ ] 수량 변경 시 실시간 총액 업데이트
    - [ ] 수량 변경 시 데이터베이스 즉시 반영
    - [ ] 재고 부족 시 경고 메시지 표시
  - [ ] 장바구니 항목 삭제 기능
    - [ ] 개별 항목 삭제 버튼
    - [ ] 삭제 확인 다이얼로그 (선택사항)
    - [ ] 선택된 항목 일괄 삭제 기능
    - [ ] 장바구니 전체 비우기 기능
    - [ ] 삭제 후 목록 자동 갱신
  - [ ] 장바구니 유효성 검증
    - [ ] 상품이 삭제되었거나 비활성화된 경우 표시
    - [ ] 재고가 부족한 경우 경고 표시
    - [ ] 옵션이 더 이상 존재하지 않는 경우 처리
    - [ ] 장바구니 항목 최대 개수 제한 (선택사항)
  - [ ] 장바구니 상태 관리
    - [ ] 로그인 상태에서만 장바구니 접근 가능
    - [ ] 장바구니 데이터 실시간 동기화
    - [ ] 에러 발생 시 사용자 친화적 메시지 표시
- [ ] 주문 프로세스 구현
  - [ ] 주문 데이터베이스 스키마 확인
    - [ ] orders 테이블 구조 확인 (clerk_id, total_amount, status, shipping_address, order_note)
    - [ ] order_items 테이블 구조 확인 (order_id, product_id, product_name, quantity, price)
    - [ ] 주문 상태 값 확인 (pending, confirmed, shipped, delivered, cancelled)
    - [ ] 결제 관련 필드 확인 (payment_id, payment_method, payment_status, payment_data)
  - [ ] 주문 정보 입력 페이지
    - [ ] 주문 페이지 생성 (`/checkout`)
    - [ ] 장바구니에서 주문하기 버튼 클릭 시 주문 페이지로 이동
    - [ ] 로그인 상태 확인 (비로그인 시 로그인 유도)
    - [ ] 장바구니가 비어있을 경우 처리 (장바구니 페이지로 리다이렉트)
    - [ ] 선택한 장바구니 항목만 주문 가능하도록 처리 (선택사항)
  - [ ] 배송 정보 입력 폼
    - [ ] 수령인 이름 입력
    - [ ] 연락처 입력 (휴대폰 번호)
    - [ ] 배송 주소 입력 (우편번호, 기본 주소, 상세 주소)
    - [ ] 배송 요청사항 선택 또는 직접 입력
    - [ ] 입력 필드 유효성 검증 (필수 항목 체크)
    - [ ] 배송 정보 저장 기능 (선택사항 - 다음 주문 시 재사용)
  - [ ] 주문 확인 페이지
    - [ ] 주문할 상품 목록 표시 (이미지, 이름, 옵션, 수량, 단가, 소계)
    - [ ] 배송 정보 요약 표시
    - [ ] 주문 금액 계산 (상품 금액 합계)
    - [ ] 배송비 계산 (5만원 이상 무료 배송 등 규칙 적용)
    - [ ] 최종 결제 금액 표시
    - [ ] 주문 메모 입력 필드
    - [ ] 주문 정보 수정 버튼 (배송 정보 수정)
  - [ ] 주문 생성 및 저장
    - [ ] 주문 정보 검증 (장바구니 항목 재확인, 재고 확인)
    - [ ] 주문 생성 Server Action 구현
    - [ ] orders 테이블에 주문 정보 저장 (clerk_id, total_amount, status='pending', shipping_address, order_note)
    - [ ] order_items 테이블에 주문 상세 항목 저장 (product_id, product_name, quantity, price)
    - [ ] 주문 생성 시 장바구니에서 해당 항목 제거 (선택사항 - 결제 완료 후 제거)
    - [ ] 재고 확인 및 차감 (주문 시점 또는 결제 완료 시점)
    - [ ] 주문 총액 검증 (order_items 합계와 orders.total_amount 일치 확인)
  - [ ] 주문 완료 페이지
    - [ ] 주문 완료 페이지 생성 (`/checkout/complete?orderId={id}`)
    - [ ] 주문 번호 표시
    - [ ] 주문 완료 메시지 표시
    - [ ] 주문 상세 정보 요약 표시
    - [ ] 주문 내역 보기 버튼 (마이페이지로 이동)
    - [ ] 쇼핑 계속하기 버튼 (홈으로 이동)
  - [ ] 주문 상태 관리
    - [ ] 주문 상태 초기값 설정 (pending)
    - [ ] 주문 상태 변경 기능 (Phase 4 결제 완료 후 confirmed로 변경)
    - [ ] 주문 취소 기능 (Phase 5 마이페이지에서 구현)
    - [ ] 주문 상태에 따른 UI 표시
  - [ ] 주문 유효성 검증
    - [ ] 장바구니 항목 재고 재확인 (주문 생성 시점)
    - [ ] 비활성화된 상품 주문 방지
    - [ ] 품절 상품 주문 방지
    - [ ] 주문 금액 검증 (0원 또는 음수 주문 방지)
    - [ ] 배송 정보 필수 항목 체크
    - [ ] 중복 주문 방지 (선택사항)
  - [ ] 에러 처리 및 사용자 안내
    - [ ] 주문 생성 실패 시 에러 메시지 표시
    - [ ] 재고 부족 시 상세 안내 메시지
    - [ ] 주문 생성 중 로딩 상태 표시
    - [ ] 주문 완료 후 장바구니 상태 업데이트
    - [ ] 네트워크 오류 시 재시도 기능
- [ ] 주문 테이블 연동
  - [ ] 주문 조회 기능 (사용자별 주문 목록)
  - [ ] 주문 상세 조회 기능 (주문 ID로 상세 정보 조회)
  - [ ] 주문 상태별 필터링 기능 (Phase 5 마이페이지에서 활용)

### Phase 4: 결제 통합 (1주)

- [ ] Toss Payments MCP 연동
- [ ] 테스트 결제 구현
- [ ] 결제 완료 후 주문 저장

### Phase 5: 마이페이지 (0.5주)

- [ ] 주문 내역 조회
  - [ ] 마이페이지 생성 (`/my/orders` 또는 `/my`)
  - [ ] 로그인 상태 확인 (비로그인 시 로그인 유도)
  - [ ] 사용자별 주문 목록 조회 (`getOrders` Server Action 활용)
  - [ ] 주문 목록 카드/리스트 형태로 표시
    - [ ] 주문 번호 표시
    - [ ] 주문 일시 표시 (최신순 정렬)
    - [ ] 주문 상태 표시 (pending, confirmed, shipped, delivered, cancelled)
    - [ ] 주문 금액 표시 (상품 금액 + 배송비 합계)
    - [ ] 주문 상태별 배지/라벨 표시 (한글 변환)
  - [ ] 주문 상태별 필터링 기능
    - [ ] 전체 주문 보기
    - [ ] 결제 대기 중 (pending)
    - [ ] 주문 확인됨 (confirmed)
    - [ ] 배송 중 (shipped)
    - [ ] 배송 완료 (delivered)
    - [ ] 주문 취소 (cancelled)
  - [ ] 주문 내역이 없을 경우 빈 상태 메시지 표시
  - [ ] 주문 상세 보기 버튼/링크 (각 주문 항목에 배치)
- [ ] 주문 상세 보기 (`order_items` 포함)
  - [ ] 주문 상세 페이지 생성 (`/my/orders/[id]`)
  - [ ] 로그인 상태 확인 (비로그인 시 로그인 유도)
  - [ ] 주문 ID로 주문 상세 조회 (`getOrder` Server Action 활용)
  - [ ] 본인의 주문인지 검증 (본인이 아닌 경우 접근 거부)
  - [ ] 주문 기본 정보 표시
    - [ ] 주문 번호
    - [ ] 주문 일시
    - [ ] 주문 상태 및 결제 상태
    - [ ] 최종 결제 금액
  - [ ] 주문 상품 목록 표시 (`order_items`)
    - [ ] 상품 이미지 (있는 경우)
    - [ ] 상품명 (`product_name`)
    - [ ] 상품 옵션 (사이즈, 색상 등 - `options` 필드)
    - [ ] 단가 및 수량
    - [ ] 소계 (단가 × 수량)
  - [ ] 배송 정보 표시 (`shipping_address`)
    - [ ] 수령인 이름
    - [ ] 연락처
    - [ ] 배송 주소 (우편번호, 기본 주소, 상세 주소)
    - [ ] 배송 요청사항 (있는 경우)
  - [ ] 결제 정보 표시
    - [ ] 결제 수단 (`payment_method`)
    - [ ] 결제 상태 (`payment_status`)
    - [ ] 결제 금액 내역 (상품 금액, 배송비, 최종 결제 금액)
  - [ ] 주문 메모 표시 (`order_note` - 있는 경우)
  - [ ] 주문 취소 기능 (Phase 5에서 구현 예정 - 현재는 UI만)
    - [ ] 취소 가능한 상태 확인 (pending, confirmed만 취소 가능)
    - [ ] 주문 취소 버튼 표시 (취소 가능한 경우만)
    - [ ] 취소 확인 다이얼로그 (선택사항)

### Phase 6: 테스트 & 배포 (0.5주)

- [ ] 전체 플로우 테스트
- [ ] 버그 수정
- [ ] Vercel 배포

**총 예상 개발 기간: 4주**

---

## 📈 성공 지표 (MVP 검증 기준)

### 정량적 지표

- 회원가입 수: 최소 50명
- 실제 테스트 결제 시도: 최소 10건
- 결제 완료율: 50% 이상
- 장바구니 추가율: 방문자 대비 20%

### 정성적 지표

- 사용자 피드백 수집 (간단한 설문)
- 주요 개선 포인트 파악
- 기술 스택 검증 (Clerk + Supabase + Toss Payments 조합)

---

## 🚨 제약사항 및 주의사항

- Supabase RLS는 사용하지 않습니다 (서버 사이드에서 권한 체크)
- 어드민 상품 관리 대시보드는 Clerk 기반 권한 체크로 관리자만 접근 가능
- 결제는 반드시 테스트 모드로만 운영
- 실제 배송 기능은 구현하지 않습니다 (주문 상태만 관리)
- 상품 리뷰, 찜하기, 쿠폰 등의 부가 기능은 제외

## 📦 개발 시작하기

1. 프로젝트 초기화부터 시작해주세요
2. 각 단계별로 완료 후 다음 단계로 진행해주세요
3. 코드는 깔끔하고 유지보수 가능하도록 작성해주세요
4. TypeScript를 사용해주세요
5. 에러 핸들링을 철저히 해주세요
